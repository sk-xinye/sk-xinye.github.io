<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"sk-xinye.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.yml"};
  </script>

  <meta name="description" content="磁盘原理 Linux 概述什么是LinuxLinux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和Unix的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的Unix工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。 Unix和Linux有什么区别Linux和Unix都是功能">
<meta property="og:type" content="article">
<meta property="og:title" content="总览">
<meta property="og:url" content="https://sk-xinye.github.io/2021/06/17/%E6%80%BB%E8%A7%88/index.html">
<meta property="og:site_name" content="sk-xinyeの博客">
<meta property="og:description" content="磁盘原理 Linux 概述什么是LinuxLinux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和Unix的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的Unix工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。 Unix和Linux有什么区别Linux和Unix都是功能">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://sk-xinye.github.io/2021/06/17/%E6%80%BB%E8%A7%88/%E5%86%85%E6%A0%B8.png">
<meta property="og:image" content="https://sk-xinye.github.io/2021/06/17/%E6%80%BB%E8%A7%88/linux%E6%96%87%E4%BB%B6.png">
<meta property="og:image" content="https://sk-xinye.github.io/2021/06/17/%E6%80%BB%E8%A7%88/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.png">
<meta property="article:published_time" content="2021-06-17T06:04:08.000Z">
<meta property="article:modified_time" content="2023-07-16T13:14:55.048Z">
<meta property="article:author" content="sk-xinye">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sk-xinye.github.io/2021/06/17/%E6%80%BB%E8%A7%88/%E5%86%85%E6%A0%B8.png">

<link rel="canonical" href="https://sk-xinye.github.io/2021/06/17/%E6%80%BB%E8%A7%88/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>总览 | sk-xinyeの博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">sk-xinyeの博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录学习的脚步</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-fa fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">1</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">18</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">142</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://sk-xinye.github.io/2021/06/17/%E6%80%BB%E8%A7%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="sk-xinye">
      <meta itemprop="description" content="愿所有努力都不被辜负">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sk-xinyeの博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          总览
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-17 14:04:08" itemprop="dateCreated datePublished" datetime="2021-06-17T14:04:08+08:00">2021-06-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-07-16 21:14:55" itemprop="dateModified" datetime="2023-07-16T21:14:55+08:00">2023-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><em><strong>磁盘原理</strong></em></p>
<h2 id="Linux-概述"><a href="#Linux-概述" class="headerlink" title="Linux 概述"></a>Linux 概述</h2><h3 id="什么是Linux"><a href="#什么是Linux" class="headerlink" title="什么是Linux"></a>什么是Linux</h3><p>Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和Unix的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的Unix工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。</p>
<h3 id="Unix和Linux有什么区别"><a href="#Unix和Linux有什么区别" class="headerlink" title="Unix和Linux有什么区别"></a>Unix和Linux有什么区别</h3><p>Linux和Unix都是功能强大的操作系统，都是应用广泛的服务器操作系统，有很多相似之处，甚至有一部分人错误地认为Unix和Linux操作系统是一样的，然而，事实并非如此，以下是两者的区别。</p>
<p>开源性</p>
<ul>
<li>Linux是一款开源操作系统，不需要付费，即可使用；Unix是一款对源码实行知识产权保护的传统商业软件，使用需要付费授权使用。</li>
</ul>
<p>跨平台性</p>
<ul>
<li>Linux操作系统具有良好的跨平台性能，可运行在多种硬件平台上；Unix操作系统跨平台性能较弱，大多需与硬件配套使用。</li>
</ul>
<p>可视化界面</p>
<ul>
<li>Linux除了进行命令行操作，还有窗体管理系统；Unix只是命令行下的系统。</li>
</ul>
<p>硬件环境</p>
<ul>
<li>Linux操作系统对硬件的要求较低，安装方法更易掌握；Unix对硬件要求比较苛刻，安装难度较大。</li>
</ul>
<p>用户群体</p>
<ul>
<li>Linux的用户群体很广泛，个人和企业均可使用；Unix的用户群体比较窄，多是安全性要求高的大型企业使用，如银行、电信部门等，或者Unix硬件厂商使用，如Sun等。<br>相比于Unix操作系统，Linux操作系统更受广大计算机爱好者的喜爱，主要原因是Linux操作系统具有Unix操作系统的全部功能，并且能够在普通PC计算机上实现全部的Unix特性，开源免费的特性，更容易普及使用！</li>
</ul>
<h3 id="什么是-Linux-内核"><a href="#什么是-Linux-内核" class="headerlink" title="什么是 Linux 内核"></a>什么是 Linux 内核</h3><p>Linux 系统的核心是内核。内核控制着计算机系统上的所有硬件和软件，在必要时分配硬件，并根据需要执行软件。</p>
<ul>
<li>系统内存管理</li>
<li>应用程序管理</li>
<li>硬件设备管理</li>
<li>文件系统管理</li>
</ul>
<h3 id="Linux的基本组件是什么"><a href="#Linux的基本组件是什么" class="headerlink" title="Linux的基本组件是什么"></a>Linux的基本组件是什么</h3><p>就像任何其他典型的操作系统一样，Linux拥有所有这些组件：内核，shell和GUI，系统实用程序和应用程序。Linux比其他操作系统更具优势的是每个方面都附带其他功能，所有代码都可以免费下载。</p>
<h3 id="Linux-的体系结构"><a href="#Linux-的体系结构" class="headerlink" title="Linux 的体系结构"></a>Linux 的体系结构</h3><p>从大的方面讲，Linux 体系结构可以分为两块：</p>
<img src="/2021/06/17/%E6%80%BB%E8%A7%88/%E5%86%85%E6%A0%B8.png" class="">

<p>用户空间(User Space) ：用户空间又包括用户的应用程序(User Applications)、C 库(C Library) 。<br>内核空间(Kernel Space) ：内核空间又包括系统调用接口(System Call Interface)、内核(Kernel)、平台架构相关的代码(Architecture-Dependent Kernel Code) 。</p>
<h4 id="为什么-Linux-体系结构要分为用户空间和内核空间的原因"><a href="#为什么-Linux-体系结构要分为用户空间和内核空间的原因" class="headerlink" title="为什么 Linux 体系结构要分为用户空间和内核空间的原因"></a>为什么 Linux 体系结构要分为用户空间和内核空间的原因</h4><ol>
<li>现代 CPU 实现了不同的工作模式，不同模式下 CPU 可以执行的指令和访问的寄存器不同。<ul>
<li>实模式 （Real-Address Mode）：是指8086时代的工作模式，也就是通过 段寄存器«4 +偏移地址的寻址方式。</li>
<li>保护模式 （Protected Mode）: 从80386开始引入了保护模式，它的寄存器从16位扩展到了32位，而且不再使用之前的段寄存器«4 +偏移地址的寻址方式，而是使用段描述符的方式描述基址和限长，并通过描述符中的属性设置实现对内存段的访问限制和数据 保护。</li>
<li>虚拟8086模式（Virtual-8086 Mode）：这个就是所谓的准操作模式，在保护模式下，CPU支持运行8086的软件。</li>
<li>系统管理模式（System Management Mode ): 从80386以后引入的一个标准功能，最初应该是用于实现电源管理的功能或者用来让OEM做一些差异性的feature，它对OS或者其它应用是透明的。当有系统管理事件产生时，CPU上的SMI#（external system interrupt pin）就会被触发，CPU就会进入SMM mode并切换到一个单独的地址空间保存上下文然后执行相应的任务，当RSM从SMM返回时，CPU恢复之前的工作继续执行。</li>
</ul>
</li>
<li>Linux 从 CPU 的角度出发，为了保护内核的安全，把系统分成了两部分。</li>
</ol>
<p>用户空间和内核空间是程序执行的两种不同的状态，我们可以通过两种方式完成用户空间到内核空间的转移：1）系统调用；2）硬件中断。</p>
<h3 id="BASH和DOS之间的基本区别是什么"><a href="#BASH和DOS之间的基本区别是什么" class="headerlink" title="BASH和DOS之间的基本区别是什么"></a>BASH和DOS之间的基本区别是什么</h3><p>BASH和DOS控制台之间的主要区别在于3个方面：</p>
<ul>
<li>BASH命令区分大小写，而DOS命令则不区分;</li>
<li>在BASH下，/character是目录分隔符，\作为转义字符。在DOS下，/用作命令参数分隔符，\是目录分隔符</li>
<li>DOS遵循命名文件中的约定，即8个字符的文件名后跟一个点，扩展名为3个字符。BASH没有遵循这样的惯例。</li>
</ul>
<h3 id="Linux-开机启动过程"><a href="#Linux-开机启动过程" class="headerlink" title="Linux 开机启动过程"></a>Linux 开机启动过程</h3><ol>
<li>主机加电自检，加载 BIOS 硬件信息。</li>
<li>读取 MBR 的引导文件(GRUB、LILO)。</li>
<li>引导 Linux 内核。</li>
<li>运行第一个进程 init (进程号永远为 1 )。</li>
<li>进入相应的运行级别。</li>
<li>运行终端，输入用户名和密码</li>
</ol>
<h3 id="Linux-使用的进程间通信方式"><a href="#Linux-使用的进程间通信方式" class="headerlink" title="Linux 使用的进程间通信方式"></a>Linux 使用的进程间通信方式</h3><ol>
<li>管道(pipe)、流管道(s_pipe)、有名管道(FIFO)。</li>
<li>信号(signal) 。</li>
<li>消息队列。</li>
<li>共享内存。</li>
<li>信号量。</li>
<li>套接字(socket)。</li>
</ol>
<h3 id="Linux-有哪些系统日志文件"><a href="#Linux-有哪些系统日志文件" class="headerlink" title="Linux 有哪些系统日志文件"></a>Linux 有哪些系统日志文件</h3><p>比较重要的是 /var/log/messages 日志文件。</p>
<ul>
<li>该日志文件是许多进程日志文件的汇总，从该文件可以看出任何入侵企图或成功的入侵。</li>
<li>另外，如果胖友的系统里有 ELK 日志集中收集，它也会被收集进去。</li>
</ul>
<h3 id="什么是交换空间"><a href="#什么是交换空间" class="headerlink" title="什么是交换空间"></a>什么是交换空间</h3><p>交换空间是Linux使用的一定空间，用于临时保存一些并发运行的程序。当RAM没有足够的内存来容纳正在执行的所有程序时，就会发生这种情况。</p>
<h3 id="什么是root帐户"><a href="#什么是root帐户" class="headerlink" title="什么是root帐户"></a>什么是root帐户</h3><p>root帐户就像一个系统管理员帐户，允许你完全控制系统。你可以在此处创建和维护用户帐户，为每个帐户分配不同的权限。每次安装Linux时都是默认帐户。</p>
<h3 id="什么是LILO"><a href="#什么是LILO" class="headerlink" title="什么是LILO"></a>什么是LILO</h3><p>LILO是Linux的引导加载程序。它主要用于将Linux操作系统加载到主内存中，以便它可以开始运行。</p>
<h3 id="什么是BASH"><a href="#什么是BASH" class="headerlink" title="什么是BASH"></a>什么是BASH</h3><p>BASH是Bourne Again SHell的缩写。它由Steve Bourne编写，作为原始Bourne Shell（由/ bin / sh表示）的替代品。它结合了原始版本的Bourne Shell的所有功能，以及其他功能，使其更容易使用。从那以后，它已被改编为运行Linux的大多数系统的默认shell。</p>
<h2 id="磁盘、目录、文件"><a href="#磁盘、目录、文件" class="headerlink" title="磁盘、目录、文件"></a>磁盘、目录、文件</h2><h3 id="简单-Linux-文件系统"><a href="#简单-Linux-文件系统" class="headerlink" title="简单 Linux 文件系统"></a>简单 Linux 文件系统</h3><p>在 Linux 操作系统中，所有被操作系统管理的资源，例如网络接口卡、磁盘驱动器、打印机、输入输出设备、普通文件或是目录都被看作是一个文件。</p>
<p>也就是说在 Linux 系统中有一个重要的概念<strong>：一切都是文件</strong>。其实这是 Unix 哲学的一个体现，而 Linux 是重写 Unix 而来，所以这个概念也就传承了下来。在 Unix 系统中，把一切资源都看作是文件，包括硬件设备。UNIX系统把每个硬件都看成是一个文件，通常称为设备文件，这样用户就可以用读写文件的方式实现对硬件的访问。</p>
<p>Linux 支持 5 种文件类型，如下图所示：</p>
<img src="/2021/06/17/%E6%80%BB%E8%A7%88/linux%E6%96%87%E4%BB%B6.png" class="">

<h3 id="Linux-的目录结构是怎样的"><a href="#Linux-的目录结构是怎样的" class="headerlink" title="Linux 的目录结构是怎样的"></a>Linux 的目录结构是怎样的</h3><p>Linux 文件系统的结构层次鲜明，就像一棵倒立的树，最顶层是其根目录：</p>
<img src="/2021/06/17/%E6%80%BB%E8%A7%88/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.png" class="">

<p>常见目录说明：</p>
<ul>
<li>/bin： 存放二进制可执行文件(ls,cat,mkdir等)，常用命令一般都在这里；</li>
<li>/etc： 存放系统管理和配置文件；</li>
<li>/home： 存放所有用户文件的根目录，是用户主目录的基点，比如用户user的主目录就是/home/user，可以用~user表示；</li>
<li><strong>/usr</strong>： 用于存放系统应用程序；</li>
<li>/opt： 额外安装的可选应用程序包所放置的位置。一般情况下，我们可以把tomcat等都安装到这里；</li>
<li>/proc： 虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息；</li>
<li>/root： 超级用户（系统管理员）的主目录（特权阶级o）；</li>
<li>/sbin: 存放二进制可执行文件，只有root才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序。如ifconfig等；</li>
<li>/dev： 用于存放设备文件；</li>
<li>/mnt： 系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的文件系统；</li>
<li>/boot： 存放用于系统引导时使用的各种文件；</li>
<li><strong>/lib</strong>： 存放着和系统运行相关的库文件 ；</li>
<li>/tmp： 用于存放各种临时文件，是公用的临时文件存储点；</li>
<li>/var： 用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的日志文件（系统启动日志等。）等；</li>
<li>/lost+found： 这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么.chk）就在这里。</li>
</ul>
<h3 id="什么是-inode"><a href="#什么是-inode" class="headerlink" title="什么是 inode"></a>什么是 inode</h3><p>理解inode，要从文件储存说起。</p>
<p>文件储存在硬盘上，硬盘的最小存储单位叫做”扇区”（Sector）。每个扇区储存512字节（相当于0.5KB）。</p>
<p>操作系统读取硬盘的时候，不会一个个扇区地读取，这样效率太低，而是一次性连续读取多个扇区，即一次性读取一个”块”（block）。这种由多个扇区组成的”块”，是文件存取的最小单位。”块”的大小，最常见的是4KB，即连续八个 sector组成一个 block。</p>
<p>文件数据都储存在”块”中，那么很显然，我们还必须找到一个地方储存文件的元信息，比如文件的创建者、文件的创建日期、文件的大小等等。这种储存文件元信息的区域就叫做inode，中文译名为”索引节点”。</p>
<p>每一个文件都有对应的inode，里面包含了与该文件有关的一些信息。</p>
<h4 id="简述-Linux-文件系统通过-i-节点把文件的逻辑结构和物理结构转换的工作过程"><a href="#简述-Linux-文件系统通过-i-节点把文件的逻辑结构和物理结构转换的工作过程" class="headerlink" title="简述 Linux 文件系统通过 i 节点把文件的逻辑结构和物理结构转换的工作过程"></a>简述 Linux 文件系统通过 i 节点把文件的逻辑结构和物理结构转换的工作过程</h4><p>Linux 通过 inode 节点表将文件的逻辑结构和物理结构进行转换。</p>
<ul>
<li>inode 节点是一个 64 字节长的表，表中包含了文件的相关信息，其中有文件的大小、文件所有者、文件的存取许可方式以及文件的类型等重要信息。在 inode 节点表中最重要的内容是磁盘地址表。在磁盘地址表中有 13 个块号，文件将以块号在磁盘地址表中出现的顺序依次读取相应的块。</li>
<li>Linux 文件系统通过把 inode 节点和文件名进行连接，当需要读取该文件时，文件系统在当前目录表中查找该文件名对应的项，由此得到该文件相对应的 inode 节点号，通过该 inode 节点的磁盘地址表把分散存放的文件物理块连接成文件的逻辑结构。</li>
</ul>
<h3 id="什么是硬链接和软链接"><a href="#什么是硬链接和软链接" class="headerlink" title="什么是硬链接和软链接"></a>什么是硬链接和软链接</h3><p>1）硬链接</p>
<p>由于 Linux 下的文件是通过索引节点(inode)来识别文件，硬链接可以认为是一个指针，指向文件索引节点的指针，系统并不为它重新分配 inode 。每添加一个一个硬链接，文件的链接数就加 1 。</p>
<p>不足：1）不可以在不同文件系统的文件间建立链接；2）只有超级用户才可以为目录创建硬链接。</p>
<p>2）软链接</p>
<p>ln  -s  [源文件或目录]  [目标文件或目录]</p>
<p>正确的删除方式（删除软链接，但不删除实际数据）<br>rm -rf  ./test_chk_ln</p>
<p>错误的删除方式<br>rm -rf ./test_chk_ln/ (这样就会把原来test_chk下的内容删除)</p>
<p>软链接克服了硬链接的不足，没有任何文件系统的限制，任何用户可以创建指向目录的符号链接。因而现在更为广泛使用，它具有更大的灵活性，甚至可以跨越不同机器、不同网络对文件进行链接。</p>
<p>不足：因为链接文件包含有原文件的路径信息，所以当原文件从一个目录下移到其他目录中，再访问链接文件，系统就找不到了，而硬链接就没有这个缺陷，你想怎么移就怎么移；还有它要系统分配额外的空间用于建立新的索引节点和保存原文件的路径。</p>
<p>实际场景下，基本是使用软链接。总结区别如下：</p>
<ul>
<li>硬链接不可以跨分区，软件链可以跨分区。</li>
<li>硬链接指向一个 inode 节点，而软链接则是创建一个新的 inode 节点。</li>
<li>删除硬链接文件，不会删除原文件，删除软链接文件，会把原文件删除。</li>
</ul>
<h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><h3 id="一台-Linux-系统初始化环境后需要做一些什么安全工作"><a href="#一台-Linux-系统初始化环境后需要做一些什么安全工作" class="headerlink" title="一台 Linux 系统初始化环境后需要做一些什么安全工作"></a>一台 Linux 系统初始化环境后需要做一些什么安全工作</h3><ol>
<li>添加普通用户登陆，禁止 root 用户登陆，更改 SSH 端口号,不一定干这个事。</li>
<li>服务器使用密钥登陆，禁止密码登陆。</li>
<li>开启防火墙，关闭 SElinux ，根据业务需求设置相应的防火墙规则。</li>
<li>装 fail2ban 这种防止 SSH 暴力破击的软件</li>
<li>设置只允许公司办公网出口 IP 能登陆服务器(看公司实际需要)</li>
<li>修改历史命令记录的条数为 10 条。</li>
<li>只允许有需要的服务器可以访问外网，其它全部禁止。</li>
<li>做好软件层面的防护。<ul>
<li>8.1 设置 nginx_waf 模块防止 SQL 注入。</li>
<li>8.2 把 Web 服务使用 www 用户启动，更改网站目录的所有者和所属组为 www 。</li>
</ul>
</li>
</ol>
<h3 id="什么叫-CC-攻击？什么叫-DDOS-攻击"><a href="#什么叫-CC-攻击？什么叫-DDOS-攻击" class="headerlink" title="什么叫 CC 攻击？什么叫 DDOS 攻击"></a>什么叫 CC 攻击？什么叫 DDOS 攻击</h3><ul>
<li>CC 攻击，主要是用来攻击页面的，模拟多个用户不停的对你的页面进行访问，从而使你的系统资源消耗殆尽。</li>
<li>DDOS 攻击，中文名叫分布式拒绝服务攻击，指借助服务器技术将多个计算机联合起来作为攻击平台，来对一个或多个目标发动 DDOS 攻击。</li>
</ul>
<p>攻击，即是通过大量合法的请求占用大量网络资源，以达到瘫痪网络的目的。</p>
<p>预防 CC、DDOS 攻击，这些只能是用硬件防火墙做流量清洗，将攻击流量引入黑洞。</p>
<h3 id="什么是网站数据库注入"><a href="#什么是网站数据库注入" class="headerlink" title="什么是网站数据库注入"></a>什么是网站数据库注入</h3><ul>
<li>由于程序员的水平及经验参差不齐，大部分程序员在编写代码的时候，没有对用户输入数据的合法性进行判断。</li>
<li>应用程序存在安全隐患。用户可以提交一段数据库查询代码，根据程序返回的结果，获得某些他想得知的数据，这就是所谓的 SQL 注入。</li>
<li>SQL注入，是从正常的 WWW 端口访问，而且表面看起来跟一般的 Web 页面访问没什么区别，如果管理员没查看日志的习惯，可能被入侵很长时间都不会发觉。</li>
</ul>
<p>如何过滤与预防？</p>
<p>数据库网页端注入这种，可以考虑使用 nginx_waf 做过滤与预防。</p>
<h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><h3 id="Shell-脚本是什么"><a href="#Shell-脚本是什么" class="headerlink" title="Shell 脚本是什么"></a>Shell 脚本是什么</h3><p>一个 Shell 脚本是一个文本文件，包含一个或多个命令。作为系统管理员，我们经常需要使用多个命令来完成一项任务，我们可以添加这些所有命令在一个文本文件(Shell 脚本)来完成这些日常工作任务。</p>
<h4 id="什么是默认登录-Shell"><a href="#什么是默认登录-Shell" class="headerlink" title="什么是默认登录 Shell"></a>什么是默认登录 Shell</h4><p>在 Linux 操作系统，”/bin/bash” 是默认登录 Shell，是在创建用户时分配的。</p>
<p>使用 chsh 命令可以改变默认的 Shell 。示例如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># chsh &lt;用户名&gt; -s &lt;新shell&gt;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># chsh ThinkWon -s /bin/sh</span></span></span><br></pre></td></tr></table></figure>

<h3 id="语法级"><a href="#语法级" class="headerlink" title="语法级"></a>语法级</h3><h4 id="可以在-Shell-脚本中使用哪些类型的变量"><a href="#可以在-Shell-脚本中使用哪些类型的变量" class="headerlink" title="可以在 Shell 脚本中使用哪些类型的变量"></a>可以在 Shell 脚本中使用哪些类型的变量</h4><ul>
<li>系统定义变量<ul>
<li>系统变量是由系统自己创建的。这些变量通常由大写字母组成，可以通过 set 命令查看。</li>
</ul>
</li>
<li>用户定义变量<ul>
<li>用户变量由系统用户来生成和定义，变量的值可以通过命令 “echo $&lt;变量名&gt;” 查看。</li>
</ul>
</li>
</ul>
<h4 id="Shell脚本中-标记的用途是什么"><a href="#Shell脚本中-标记的用途是什么" class="headerlink" title="Shell脚本中 $? 标记的用途是什么"></a>Shell脚本中 $? 标记的用途是什么</h4><p>在写一个 Shell 脚本时，如果你想要检查前一命令是否执行成功，在 if 条件中使用 $? 可以来检查前一命令的结束状态。</p>
<p>如果结束状态是 0 ，说明前一个命令执行成功。如果结束状态不是0，说明命令执行失败。例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@localhost:~## ls /usr/bin/shar</span><br><span class="line">/usr/bin/shar</span><br><span class="line">root@localhost:~## echo $?</span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<h4 id="Bourne-Shell-bash-中有哪些特殊的变量"><a href="#Bourne-Shell-bash-中有哪些特殊的变量" class="headerlink" title="Bourne Shell(bash) 中有哪些特殊的变量"></a>Bourne Shell(bash) 中有哪些特殊的变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">内建变量    解释</span><br><span class="line"><span class="meta">$</span><span class="bash">0    命令行中的脚本名字</span></span><br><span class="line"><span class="meta">$</span><span class="bash">1    第一个命令行参数</span></span><br><span class="line"><span class="meta">$</span><span class="bash">2    第二个命令行参数</span></span><br><span class="line">…..    …….</span><br><span class="line"><span class="meta">$</span><span class="bash">9    第九个命令行参数</span></span><br><span class="line"><span class="meta">$</span><span class="bash"><span class="comment">##    命令行参数的数量</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">*    所有命令行参数，以空格隔开</span></span><br></pre></td></tr></table></figure>

<h4 id="如何取消变量或取消变量赋值"><a href="#如何取消变量或取消变量赋值" class="headerlink" title="如何取消变量或取消变量赋值"></a>如何取消变量或取消变量赋值</h4><p>unset 命令用于取消变量或取消变量赋值。语法如下所示：## unset &lt;变量名&gt;</p>
<h4 id="Shell-脚本中-if-语法如何嵌套"><a href="#Shell-脚本中-if-语法如何嵌套" class="headerlink" title="Shell 脚本中 if 语法如何嵌套"></a>Shell 脚本中 if 语法如何嵌套</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件 ]</span><br><span class="line">then</span><br><span class="line">命令1</span><br><span class="line">命令2</span><br><span class="line">…..</span><br><span class="line">else</span><br><span class="line">if [ 条件 ]</span><br><span class="line">then</span><br><span class="line">命令1</span><br><span class="line">命令2</span><br><span class="line">….</span><br><span class="line">else</span><br><span class="line">命令1</span><br><span class="line">命令2</span><br><span class="line">…..</span><br><span class="line">fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h4 id="在-Shell-脚本中如何比较两个数字"><a href="#在-Shell-脚本中如何比较两个数字" class="headerlink" title="在 Shell 脚本中如何比较两个数字"></a>在 Shell 脚本中如何比较两个数字</h4><p>在 if-then 中使用测试命令（ -gt 等）来比较两个数字。例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">x=10</span><br><span class="line">y=20</span><br><span class="line">if [ $x -gt $y ]</span><br><span class="line">then</span><br><span class="line">echo “x is greater than y”</span><br><span class="line">else</span><br><span class="line">echo “y is greater than x”</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h4 id="Shell-脚本中-for-循环语法"><a href="#Shell-脚本中-for-循环语法" class="headerlink" title="Shell 脚本中 for 循环语法"></a>Shell 脚本中 for 循环语法</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for 变量 in 循环列表</span><br><span class="line">do</span><br><span class="line">命令1</span><br><span class="line">命令2</span><br><span class="line">….</span><br><span class="line">最后命令</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h4 id="Shell-脚本中-while-循环语法"><a href="#Shell-脚本中-while-循环语法" class="headerlink" title="Shell 脚本中 while 循环语法"></a>Shell 脚本中 while 循环语法</h4><p>如同 for 循环，while 循环只要条件成立就重复它的命令块。<br>不同于 for循环，while 循环会不断迭代，直到它的条件不为真。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">while [ 条件 ]</span><br><span class="line">do</span><br><span class="line">命令…</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">do</span><br><span class="line">&#123;</span><br><span class="line">命令</span><br><span class="line">&#125; while (条件)</span><br></pre></td></tr></table></figure>

<h4 id="Shell-脚本中-break-命令的作用"><a href="#Shell-脚本中-break-命令的作用" class="headerlink" title="Shell 脚本中 break 命令的作用"></a>Shell 脚本中 break 命令的作用</h4><p>break 命令一个简单的用途是退出执行中的循环。我们可以在 while 和 until 循环中使用 break 命令跳出循环。</p>
<h4 id="Shell-脚本中-continue-命令的作用"><a href="#Shell-脚本中-continue-命令的作用" class="headerlink" title="Shell 脚本中 continue 命令的作用"></a>Shell 脚本中 continue 命令的作用</h4><p>continue 命令不同于 break 命令，它只跳出当前循环的迭代，而不是整个循环。continue 命令很多时候是很有用的，例如错误发生，但我们依然希望继续执行大循环的时候。</p>
<h3 id="如何使脚本可执行"><a href="#如何使脚本可执行" class="headerlink" title="如何使脚本可执行"></a>如何使脚本可执行</h3><p>使用 chmod 命令来使脚本可执行。例子如下：chmod a+x myscript.sh</p>
<h4 id="bin-bash-的作用"><a href="#bin-bash-的作用" class="headerlink" title="#!/bin/bash 的作用"></a>#!/bin/bash 的作用</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash 是 Shell 脚本的第一行，称为释伴（shebang）行。</span></span><br></pre></td></tr></table></figure>

<p>这里 # 符号叫做 hash ，而 ! 叫做 bang。<br>它的意思是命令通过 /bin/bash 来执行。</p>
<h4 id="如何将标准输出和错误输出同时重定向到同一位置"><a href="#如何将标准输出和错误输出同时重定向到同一位置" class="headerlink" title="如何将标准输出和错误输出同时重定向到同一位置"></a>如何将标准输出和错误输出同时重定向到同一位置</h4><p>方法一：2&gt;&amp;1 (如## ls /usr/share/doc &gt; out.txt 2&gt;&amp;1 ) 。<br>方法二：&amp;&gt; (如## ls /usr/share/doc &amp;&gt; out.txt )</p>
<h3 id="在-Shell-脚本如何定义函数呢"><a href="#在-Shell-脚本如何定义函数呢" class="headerlink" title="在 Shell 脚本如何定义函数呢"></a>在 Shell 脚本如何定义函数呢</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="function"><span class="title">diskusage</span></span> () &#123; df -h ; &#125;</span></span><br><span class="line">译注：下面是我给的shell函数语法，原文没有</span><br><span class="line">[ function ] 函数名 [()]</span><br><span class="line">&#123;</span><br><span class="line">命令;</span><br><span class="line">[return int;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="如何让-Shell-就脚本得到来自终端的输入"><a href="#如何让-Shell-就脚本得到来自终端的输入" class="headerlink" title="如何让 Shell 就脚本得到来自终端的输入"></a>如何让 Shell 就脚本得到来自终端的输入</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># vi /tmp/test.sh</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo ‘Please enter your name’</span><br><span class="line">read name</span><br><span class="line">echo “My Name is $name”</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ./test.sh</span></span></span><br><span class="line">Please enter your name</span><br><span class="line">ThinkWon</span><br><span class="line">My Name is ThinkWon</span><br></pre></td></tr></table></figure>

<h3 id="如何执行算术运算"><a href="#如何执行算术运算" class="headerlink" title="如何执行算术运算"></a>如何执行算术运算</h3><ol>
<li>使用 expr 命令：## expr 5 + 2 。</li>
<li>用一个美元符号和方括号（$[ 表达式 ]）：test=$[16 + 4] ; test=$[16 + 4] 。</li>
</ol>
<h2 id="文件管理命令"><a href="#文件管理命令" class="headerlink" title="文件管理命令"></a>文件管理命令</h2><ul>
<li>cat 命令</li>
<li>cp 命令</li>
<li>ln 命令</li>
<li>mv 命令</li>
<li>rm 命令</li>
<li>tail 命令</li>
<li>vim 命令</li>
</ul>
<h3 id="chmod-命令"><a href="#chmod-命令" class="headerlink" title="chmod 命令"></a>chmod 命令</h3><p>-rw-r–r– 1 root root 296K 11-13 06:03 log2012.log</p>
<p>第一列共有 10 个位置，第一个字符指定了文件类型。在通常意义上，一个目录也是一个文件。如果第一个字符是横线，表示是一个非目录的文件。如果是 d，表示是一个目录。从第二个字符开始到第十个 9 个字符，3 个字符一组，分别表示了 3 组用户对文件或者目录的权限。权限字符用横线代表空许可，r 代表只读，w 代表写，x 代表可执行。</p>
<h3 id="chown-命令"><a href="#chown-命令" class="headerlink" title="chown 命令"></a>chown 命令</h3><p>-c 显示更改的部分的信息<br>-R 处理指定目录及子目录</p>
<p>chown -c mail:mail log2012.log</p>
<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><ul>
<li>find ./ -name ‘*.log’ 在当前目录下xun</li>
<li>find /opt -perm 777 查找 /opt 目录下 权限为 777 的文件</li>
<li>find -size +1000c 查找大于 1K 的文件</li>
<li>find -size 1000c 查找等于 1000 字符的文件</li>
</ul>
<h3 id="head-命令"><a href="#head-命令" class="headerlink" title="head 命令"></a>head 命令</h3><ul>
<li>head 1.log -n 20 显示 1.log 文件中前 20 行</li>
<li>head -n -10 t.log 显示 t.log最后 10 行</li>
</ul>
<h3 id="which-命令"><a href="#which-命令" class="headerlink" title="which 命令"></a>which 命令</h3><p>which ls 查看 ls 命令是否存在，执行哪个</p>
<h2 id="文档编辑命令"><a href="#文档编辑命令" class="headerlink" title="文档编辑命令"></a>文档编辑命令</h2><h3 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h3><p>:%s/well/good/g（等同于 :g/well/s//good/g） 替换每一行中所有 well 为 good</p>
<ul>
<li>grep -c night restart.07014命令</li>
</ul>
<h3 id="wc-命令"><a href="#wc-命令" class="headerlink" title="wc 命令"></a>wc 命令</h3><p>wc(word count)功能为统计指定的文件中字节数、字数、行数，并将统计结果输出</p>
<ul>
<li>-c 统计字节数</li>
<li>-l 统计行数</li>
<li>-m 统计字符数</li>
<li>-w 统计词数，一个字被定义为由空白、跳格或换行字符分隔的字符串</li>
<li>wc text.txt 查找文件的 行数 单词数 字节数 文件名</li>
<li>cat test.txt | wc -l 统计输出结果的行数</li>
</ul>
<h2 id="磁盘管理命令"><a href="#磁盘管理命令" class="headerlink" title="磁盘管理命令"></a>磁盘管理命令</h2><ul>
<li>cd 命令</li>
<li>df 命令 df -h</li>
<li>du 命令<ul>
<li>du -h scf/ 以易读方式显示文件夹内及子文件夹大小</li>
<li>du -ah scf/ 以易读方式显示文件夹内所有文件大小</li>
<li>du -hc test/ scf/ 显示几个文件或目录各自占用磁盘空间的大小，还统计它们的总和</li>
<li>du -hc –max-depth=1 scf/ 输出当前目录下各个子目录所使用的空间   du -sh *</li>
</ul>
</li>
<li>ls命令</li>
<li>mkdir 命令</li>
<li>pwd 命令</li>
<li>rmdir 命令</li>
</ul>
<h2 id="网络通讯命令"><a href="#网络通讯命令" class="headerlink" title="网络通讯命令"></a>网络通讯命令</h2><ul>
<li>ifconfig 命令</li>
<li>iptables 命令</li>
<li>netstat 命令</li>
<li>ping 命令</li>
<li>telnet 命令<ul>
<li>telnet 192.168.0.5  登录IP为 192.168.0.5 的远程主机</li>
</ul>
</li>
</ul>
<h2 id="系统管理命令"><a href="#系统管理命令" class="headerlink" title="系统管理命令"></a>系统管理命令</h2><p>date 命令<br>free 命令<br>kill 命令<br>ps 命令<br>top 命令<br>yum 命令</p>
<h2 id="备份压缩命令"><a href="#备份压缩命令" class="headerlink" title="备份压缩命令"></a>备份压缩命令</h2><ul>
<li>zip 命令 zip -r</li>
<li>unzip 命令<ul>
<li>解压 *.zip 文件：unzip test.zip 。</li>
<li>查看 *.zip 文件的内容：unzip -l jasper.zip</li>
</ul>
</li>
<li>tar 命令<ul>
<li>tar -zcvf /tmp/etc.tar.gz /etc  将 /etc 下的所有文件及目录打包到指定目录，并使用 gz 压缩<br>sed -i ‘$a添加的内容’ file 　　 #这是在最后一行行后添加字符串</li>
</ul>
</li>
</ul>
<h2 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h2><p>ulimit -n 查看系统允许的最大文件描述符数量<br>ulimit -S/-Hn 分别查看软限制和硬限制。硬限制设定之后不能在添加，软限制可以增加到硬限制规定的值。<br>ls /proc/31796进程号/fd |wc -l 查看某个进程占用的文件描述符（遇到问题,时间一长就crash 了，通过拉取/var/message中日志，找到时间，然后去/var/crash 查看，发现是系统申请资源的时候申请不到，导致了crash，最终定位是有个程序的文件句柄未关闭，导致超过了限制，所以才发生的问题）<br>/etc/security/limits.conf文件中进行修改 root soft nofile 65535  或者ulimit -n 65535</p>
<h2 id="系统日志"><a href="#系统日志" class="headerlink" title="系统日志"></a>系统日志</h2><p>watch journalctl _PID=2409</p>
<h2 id="磁盘读写"><a href="#磁盘读写" class="headerlink" title="磁盘读写"></a>磁盘读写</h2><p>操作前线执行下面命令得其中一条先清除cache<br>/sbin/sysctl -w vm.drop_caches=3</p>
<p>echo 3 &gt; /proc/sys/vm/drop_caches</p>
<h3 id="随机读"><a href="#随机读" class="headerlink" title="随机读"></a>随机读</h3><p>fio -name=randread -direct=1 -iodepth=64 -rw=randread -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sda （根据实际盘符来写）</p>
<h3 id="随机写"><a href="#随机写" class="headerlink" title="随机写"></a>随机写</h3><p>fio -name=randwrite -direct=1 -iodepth=64 -rw=randwrite -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sda  （根据实际盘符来写）</p>
<h3 id="顺序读"><a href="#顺序读" class="headerlink" title="顺序读"></a>顺序读</h3><p>fio -name=read -direct=1 -iodepth=64 -rw=read -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sda   （根据实际盘符来写）</p>
<h3 id="顺序写"><a href="#顺序写" class="headerlink" title="顺序写"></a>顺序写</h3><p>fio -name=write -direct=1 -iodepth=64 -rw=write -ioengine=libaio -bs=4k -size=1G -numjobs=1 -runtime=1000 -group_reporting -filename=/dev/sda  （根据实际盘符来写）</p>
<p>执行完命令后将打印结果粘贴到文本中</p>
<h3 id="免密登录"><a href="#免密登录" class="headerlink" title="免密登录"></a>免密登录</h3><p>ssh-keygen -t rsa 一直按回车<br>ssh-copy-id -p 10022 <a href="mailto:&#122;&#115;&#x68;&#105;&#x65;&#x6c;&#x64;&#64;&#x31;&#x39;&#50;&#46;&#x31;&#x36;&#x38;&#46;&#x38;&#x33;&#x2e;&#50;&#x35;&#x32;">&#122;&#115;&#x68;&#105;&#x65;&#x6c;&#x64;&#64;&#x31;&#x39;&#50;&#46;&#x31;&#x36;&#x38;&#46;&#x38;&#x33;&#x2e;&#50;&#x35;&#x32;</a></p>
<h3 id="下载包"><a href="#下载包" class="headerlink" title="下载包"></a>下载包</h3><p>yum -y install yum-utils  下载工具包</p>
<p>repotrack ansible -p /home/zshield  #下载rpm包<br>rpm -Uvh –force –nodeps *.rpm 安装<br>rpm -ivh foo-1.0-l.i386.rpm</p>
<h3 id="查看进程内存"><a href="#查看进程内存" class="headerlink" title="查看进程内存"></a>查看进程内存</h3><p>cat /proc/2913/status<br>top res<br>ps aux | sort -k4,4nr | head -n 10 查看内存占用前10名的程序</p>
<h3 id="linux-cache不能被释放"><a href="#linux-cache不能被释放" class="headerlink" title="linux cache不能被释放"></a>linux cache不能被释放</h3><p>发现Linux系统内存中的cache并不是在所有情况下都能被释放当做空闲空间用的。即使可以释放cache，也并不是对系统来说没有成本的。总结一下要点，我们应该记得这样几点：</p>
<ul>
<li>当cache作为文件缓存被释放的时候会引发IO变高，这是cache加快文件访问速度所要付出的成本。</li>
<li>tmpfs中存储的文件会占用cache空间，除非文件删除否则这个cache不会被自动释放。</li>
<li>使用shmget方式申请的共享内存会占用cache空间，除非共享内存被ipcrm或者使用shmctl去IPC_RMID，否则相关的cache空间都不会被自动释放。</li>
<li>使用mmap方法申请的MAP_SHARED标志的内存会占用cache空间，除非进程将这段内存munmap，否则相关的cache空间都不会被自动释放。实际上shmget、mmap的共享内存，在内核层都是通过tmpfs实现的，tmpfs实现的存储用的都是cache。</li>
</ul>
<h3 id="僵尸进程"><a href="#僵尸进程" class="headerlink" title="僵尸进程"></a>僵尸进程</h3><p>ps -A |grep defunct<br>ps -ef |grep defunct |more<br>kill -9</p>
<h3 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">set -e</span><br><span class="line"><span class="meta">#</span><span class="bash">source_hostname=<span class="variable">$1</span></span></span><br><span class="line">source_hostname=`grep MASTER_NODE= /etc/ansible/hosts |cut -d &#x27;=&#x27; -f 2`</span><br><span class="line">echo  &quot;source_hostname is $source_hostname&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">dest_hostname=<span class="variable">$2</span></span></span><br><span class="line">dest_hostname=`hostname`</span><br><span class="line">echo &quot;dest_hostname is $dest_hostname&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">source_ip=<span class="variable">$3</span></span></span><br><span class="line">source_ip=`grep WEB_IP= /etc/ansible/hosts |cut -d &#x27;=&#x27; -f 2`</span><br><span class="line">echo  &quot;source_ip is $source_ip&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">dest_ip=<span class="variable">$4</span></span></span><br><span class="line">dest_ip=`grep IPADDR= /etc/sysconfig/network-scripts/ifcfg-ens192 |cut -d &#x27;=&#x27; -f 2`</span><br><span class="line">echo &quot;dest_ip is $dest_ip</span><br><span class="line"></span><br><span class="line">echo &quot;开始设置宿主机名字&quot;</span><br><span class="line">hostnamectl set-hostname $dest_hostname</span><br><span class="line">echo &quot;设置名字完成&quot;</span><br><span class="line"></span><br><span class="line">array=(/home/zshield/docker/compose /home/zshield/conf /home/zshield/web /home/zshield/zs_power /home/zshield/zy /home/zshield/blind /home/zshield/init_compose /home/zshield/init_mysql /home/zshield/nginx /home/zshield/task_scheduler /home/zshield/web /home/zshield/zs_release)</span><br><span class="line">for element in $&#123;array[*]&#125;</span><br><span class="line">do</span><br><span class="line">echo &quot;开始处理目录：$element&quot;</span><br><span class="line">sed -i &quot;s/$source_ip/$dest_ip/g&quot; `grep $source_ip -rl $element`</span><br><span class="line">sed -i &quot;s/$source_hostname/$dest_hostname/g&quot; `grep $source_hostname -rl $element`</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">file_array=(/etc/sysconfig/network-scripts/ifcfg-ens192 /etc/ansible/facts.d/zshield.fact /etc/ansible/hosts /etc/hosts)</span><br><span class="line">for file in $&#123;file_array[*]&#125;</span><br><span class="line">do</span><br><span class="line">echo &quot;开始处理文件：$file&quot;</span><br><span class="line">sed -i &quot;s/$source_ip/$dest_ip/g&quot; $file</span><br><span class="line">sed -i &quot;s/$source_hostname/$dest_hostname/g&quot; $file</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;启动docker 并等待30s&quot;</span><br><span class="line">systemctl start docker</span><br><span class="line">sleep 30</span><br><span class="line"></span><br><span class="line">echo &quot;等待es启动&quot;</span><br><span class="line">real_es_result=&quot;red&quot;</span><br><span class="line">es_finish=0</span><br><span class="line">while [ $es_finish -eq 0 ]</span><br><span class="line">do</span><br><span class="line">        echo &quot;未完成，等待10s再次检测,$es_finish&quot;</span><br><span class="line">        sleep 2</span><br><span class="line">        es_result_tmp=$(curl zshield:Zx123456_shining10@localhost:19200/_cat/health)</span><br><span class="line">        es_result=$(echo $&#123;es_result_tmp&#125;)</span><br><span class="line">        echo &quot;$es_result_tmp&quot;</span><br><span class="line">        if [[ $es_result =~ $real_es_result ]]</span><br><span class="line">        then</span><br><span class="line">                es_finish=0</span><br><span class="line">                sleep 10</span><br><span class="line">        else</span><br><span class="line">                es_finish=1</span><br><span class="line">        fi</span><br><span class="line">        echo &quot;本次检查结果：$es_finish&quot;</span><br><span class="line">done</span><br><span class="line">echo &quot;完成es检查，es_finish is $es_finish&quot;</span><br><span class="line"></span><br><span class="line">echo &quot;准备进入mysql 执行sql&quot;</span><br><span class="line">docker exec -i mysql bash  &lt;&lt;EOF</span><br><span class="line">mysql -u root -p&#x27;Zx123456@shining11&#x27; -P 13306 -h 127.0.0.1</span><br><span class="line">use walle;</span><br><span class="line">update servers set name = &#x27;node81109&#x27; , host = &#x27;192.168.81.109&#x27; where name = &#x27;node81104&#x27;;</span><br><span class="line">EOF</span><br><span class="line">echo &quot;完成&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">./zx.sh node81104 node81109 192.168.81.104 192.168.81.109 &gt; f.log 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">echo &quot;准备进入mysql 执行sql&quot;</span><br><span class="line">result_path=&quot;/var/lib/mysql-files/new_server_message.csv&quot;</span><br><span class="line">docker exec -i mysql bash  &lt;&lt;EOF</span><br><span class="line">mysql -u root -p&#x27;Zx123456@shining11&#x27; -P 13306 -h 127.0.0.1</span><br><span class="line">use walle;</span><br><span class="line">select p.name,s.name from projects as p,servers as s where instr(p.server_ids,s.id) into outfile &quot;$result_path&quot;;  # 模糊查询</span><br><span class="line">EOF</span><br><span class="line">docker cp mysql:/var/lib/mysql-files/new_server_message.csv /tmp/new_server_message.csv</span><br><span class="line">echo &quot;完成&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="lvm操作"><a href="#lvm操作" class="headerlink" title="lvm操作"></a>lvm操作</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">1.查看磁盘</span><br><span class="line">ls /dev/sd*</span><br><span class="line">2.创建pv</span><br><span class="line">pvcreate /dev/sdb  /dev/sdc   | pvremove /dev/sdb</span><br><span class="line">3.创建vg</span><br><span class="line">vgcreate xfgvg1 /dev/sdb  /dev/sdc |  vgreduce xfgvg1 /dev/sdb</span><br><span class="line">4.扩容</span><br><span class="line">vgextend xfgvg1 /dev/sdd</span><br><span class="line">5.创建lv</span><br><span class="line">lvcreate -n lv1 -L +500M xfgvg1</span><br><span class="line">lvcreate -n lv2 -L 195G xfgvg1</span><br><span class="line">6.格式化文件系统</span><br><span class="line">mkfs.xfs /dev/xfgvg1/lv1</span><br><span class="line">mkfs.xfs /dev/xfgvg1/lv2</span><br><span class="line">7.创建目录用于挂载</span><br><span class="line">mkdir /xfs_lv1</span><br><span class="line">mkdir /xfs_lv2</span><br><span class="line">8.挂载</span><br><span class="line">mount /dev/xfgvg1/lv1 /xfs_lv1/</span><br><span class="line">mount /dev/xfgvg1/lv2 /xfs_lv2/</span><br><span class="line">umount /xfs_lv1</span><br><span class="line">umount /xfs_lv2</span><br><span class="line">9.写入测试数据</span><br><span class="line">echo &#123;1..10000000&#125; &gt; /xfs_lv1/test1.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">扩容lv</span><br><span class="line">1.umount /xfs_lv1/</span><br><span class="line">2.lvextend -L +4.5G /dev/xfgvg1/lv1</span><br><span class="line">3.mount /dev/xfgvg1/lv1 /xfs_lv1/</span><br><span class="line"></span><br><span class="line">清理大的pv中的PE 将小的pv迁移到大的pv上</span><br><span class="line">xfs缩容重建</span><br><span class="line">第1步：备份lv对应文件系统所有数据 yum install xfsdump -y</span><br><span class="line">xfsdump -l 0 -L xfs_all -M xfs_all -f /home/xfs_data.dump /xfs_lv2</span><br><span class="line">第2步：备份完成之后，查看一下/var/lib/xfsdump/inventory目录下目前备份的信息状态。session 0代表第一次完整备份，status为SUCCESS 就是备份完成</span><br><span class="line">xfsdump -I</span><br><span class="line">第3步：取消挂载逻辑卷</span><br><span class="line">umount /xfs_lv2</span><br><span class="line">第4步：移除逻辑卷</span><br><span class="line">lvremove  /dev/xfgvg1/lv2</span><br><span class="line">第5步：迁移pv数据到指定pv</span><br><span class="line">pvmove /dev/sdb /dev/sdc</span><br><span class="line">第6步：删除VG中的pv</span><br><span class="line">vgreduce xfgvg1 /dev/sdb</span><br><span class="line">第6步：重建lv</span><br><span class="line">lvcreate -n lv2 -L 95G xfgvg1</span><br><span class="line">第7步：格式化</span><br><span class="line">mkfs.xfs /dev/xfgvg1/lv2</span><br><span class="line">第8步：挂载</span><br><span class="line">mount /dev/xfgvg1/lv2 /xfs_lv2/</span><br><span class="line">第9步：恢复备份</span><br><span class="line">xfsrestore -f /home/xfs_data.dump -L xfs_all /xfs_lv2</span><br><span class="line">第10步：查看数据</span><br><span class="line">df -Th</span><br><span class="line">第11步：删除pv</span><br><span class="line">pvremove /dev/sdb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第1步：取消挂载逻辑卷</span><br><span class="line">umount /xfs_lv2</span><br><span class="line">第2步：检查文件系统完整性 fsck -f</span><br><span class="line">e2fsck -f /dev/xfgvg1/lv2</span><br><span class="line">第3步：缩减文件系统</span><br><span class="line">resize2fs /dev/xfgvg1/lv2 90G</span><br><span class="line"><span class="meta">#</span><span class="bash">缩减文件系统容量为90G</span></span><br><span class="line">第4步：缩减逻辑卷</span><br><span class="line">lvreduce -L 90G /dev/xfgvg1/lv2</span><br><span class="line"><span class="meta">#</span><span class="bash">缩减逻辑卷容量为90G</span></span><br><span class="line"><span class="meta">#</span><span class="bash">缩减fs或者lv时都会有警告提示，所以要考虑清楚再行动，做实验就没关系了</span></span><br><span class="line">第5步：迁移pv数据到指定pv</span><br><span class="line">pvmove /dev/sdb /dev/sdc</span><br><span class="line">第6步：删除VG中的pv</span><br><span class="line">vgreduce xfgvg1 /dev/sdb</span><br><span class="line">第7步：重新挂载</span><br><span class="line">mount /dev/xfgvg1/lv2 /xfs_lv2/</span><br><span class="line">第8步：查看数据</span><br><span class="line">df -Th</span><br><span class="line">第9步：删除pv</span><br><span class="line">pvremove /dev/sdb</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/06/16/%E9%9D%A2%E8%AF%95/" rel="prev" title="面试">
      <i class="fa fa-chevron-left"></i> 面试
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/06/17/%E6%A6%82%E8%A7%88/" rel="next" title="概览">
      概览 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">Linux 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFLinux"><span class="nav-number">1.1.</span> <span class="nav-text">什么是Linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Unix%E5%92%8CLinux%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="nav-number">1.2.</span> <span class="nav-text">Unix和Linux有什么区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Linux-%E5%86%85%E6%A0%B8"><span class="nav-number">1.3.</span> <span class="nav-text">什么是 Linux 内核</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">1.4.</span> <span class="nav-text">Linux的基本组件是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-number">1.5.</span> <span class="nav-text">Linux 的体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-Linux-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%A6%81%E5%88%86%E4%B8%BA%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%E5%92%8C%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="nav-number">1.5.1.</span> <span class="nav-text">为什么 Linux 体系结构要分为用户空间和内核空间的原因</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BASH%E5%92%8CDOS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">1.6.</span> <span class="nav-text">BASH和DOS之间的基本区别是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">1.7.</span> <span class="nav-text">Linux 开机启动过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-%E4%BD%BF%E7%94%A8%E7%9A%84%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="nav-number">1.8.</span> <span class="nav-text">Linux 使用的进程间通信方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-%E6%9C%89%E5%93%AA%E4%BA%9B%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6"><span class="nav-number">1.9.</span> <span class="nav-text">Linux 有哪些系统日志文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%A4%E6%8D%A2%E7%A9%BA%E9%97%B4"><span class="nav-number">1.10.</span> <span class="nav-text">什么是交换空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFroot%E5%B8%90%E6%88%B7"><span class="nav-number">1.11.</span> <span class="nav-text">什么是root帐户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFLILO"><span class="nav-number">1.12.</span> <span class="nav-text">什么是LILO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFBASH"><span class="nav-number">1.13.</span> <span class="nav-text">什么是BASH</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E3%80%81%E7%9B%AE%E5%BD%95%E3%80%81%E6%96%87%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">磁盘、目录、文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95-Linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.1.</span> <span class="nav-text">简单 Linux 文件系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84"><span class="nav-number">2.2.</span> <span class="nav-text">Linux 的目录结构是怎样的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-inode"><span class="nav-number">2.3.</span> <span class="nav-text">什么是 inode</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E8%BF%B0-Linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E9%80%9A%E8%BF%87-i-%E8%8A%82%E7%82%B9%E6%8A%8A%E6%96%87%E4%BB%B6%E7%9A%84%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E5%92%8C%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84%E8%BD%AC%E6%8D%A2%E7%9A%84%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="nav-number">2.3.1.</span> <span class="nav-text">简述 Linux 文件系统通过 i 节点把文件的逻辑结构和物理结构转换的工作过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%A1%AC%E9%93%BE%E6%8E%A5%E5%92%8C%E8%BD%AF%E9%93%BE%E6%8E%A5"><span class="nav-number">2.4.</span> <span class="nav-text">什么是硬链接和软链接</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E5%85%A8"><span class="nav-number">3.</span> <span class="nav-text">安全</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E5%8F%B0-Linux-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E7%8E%AF%E5%A2%83%E5%90%8E%E9%9C%80%E8%A6%81%E5%81%9A%E4%B8%80%E4%BA%9B%E4%BB%80%E4%B9%88%E5%AE%89%E5%85%A8%E5%B7%A5%E4%BD%9C"><span class="nav-number">3.1.</span> <span class="nav-text">一台 Linux 系统初始化环境后需要做一些什么安全工作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E5%8F%AB-CC-%E6%94%BB%E5%87%BB%EF%BC%9F%E4%BB%80%E4%B9%88%E5%8F%AB-DDOS-%E6%94%BB%E5%87%BB"><span class="nav-number">3.2.</span> <span class="nav-text">什么叫 CC 攻击？什么叫 DDOS 攻击</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BD%91%E7%AB%99%E6%95%B0%E6%8D%AE%E5%BA%93%E6%B3%A8%E5%85%A5"><span class="nav-number">3.3.</span> <span class="nav-text">什么是网站数据库注入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell"><span class="nav-number">4.</span> <span class="nav-text">Shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell-%E8%84%9A%E6%9C%AC%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">4.1.</span> <span class="nav-text">Shell 脚本是什么</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E9%BB%98%E8%AE%A4%E7%99%BB%E5%BD%95-Shell"><span class="nav-number">4.1.1.</span> <span class="nav-text">什么是默认登录 Shell</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E7%BA%A7"><span class="nav-number">4.2.</span> <span class="nav-text">语法级</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E4%BB%A5%E5%9C%A8-Shell-%E8%84%9A%E6%9C%AC%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%93%AA%E4%BA%9B%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%98%E9%87%8F"><span class="nav-number">4.2.1.</span> <span class="nav-text">可以在 Shell 脚本中使用哪些类型的变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell%E8%84%9A%E6%9C%AC%E4%B8%AD-%E6%A0%87%E8%AE%B0%E7%9A%84%E7%94%A8%E9%80%94%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">4.2.2.</span> <span class="nav-text">Shell脚本中 $? 标记的用途是什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Bourne-Shell-bash-%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E7%89%B9%E6%AE%8A%E7%9A%84%E5%8F%98%E9%87%8F"><span class="nav-number">4.2.3.</span> <span class="nav-text">Bourne Shell(bash) 中有哪些特殊的变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%8F%96%E6%B6%88%E5%8F%98%E9%87%8F%E6%88%96%E5%8F%96%E6%B6%88%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC"><span class="nav-number">4.2.4.</span> <span class="nav-text">如何取消变量或取消变量赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell-%E8%84%9A%E6%9C%AC%E4%B8%AD-if-%E8%AF%AD%E6%B3%95%E5%A6%82%E4%BD%95%E5%B5%8C%E5%A5%97"><span class="nav-number">4.2.5.</span> <span class="nav-text">Shell 脚本中 if 语法如何嵌套</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8-Shell-%E8%84%9A%E6%9C%AC%E4%B8%AD%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AA%E6%95%B0%E5%AD%97"><span class="nav-number">4.2.6.</span> <span class="nav-text">在 Shell 脚本中如何比较两个数字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell-%E8%84%9A%E6%9C%AC%E4%B8%AD-for-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E6%B3%95"><span class="nav-number">4.2.7.</span> <span class="nav-text">Shell 脚本中 for 循环语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell-%E8%84%9A%E6%9C%AC%E4%B8%AD-while-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E6%B3%95"><span class="nav-number">4.2.8.</span> <span class="nav-text">Shell 脚本中 while 循环语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell-%E8%84%9A%E6%9C%AC%E4%B8%AD-break-%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">4.2.9.</span> <span class="nav-text">Shell 脚本中 break 命令的作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell-%E8%84%9A%E6%9C%AC%E4%B8%AD-continue-%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">4.2.10.</span> <span class="nav-text">Shell 脚本中 continue 命令的作用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E8%84%9A%E6%9C%AC%E5%8F%AF%E6%89%A7%E8%A1%8C"><span class="nav-number">4.3.</span> <span class="nav-text">如何使脚本可执行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bin-bash-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">4.3.1.</span> <span class="nav-text">#!&#x2F;bin&#x2F;bash 的作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%B0%86%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF%E8%BE%93%E5%87%BA%E5%90%8C%E6%97%B6%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E5%90%8C%E4%B8%80%E4%BD%8D%E7%BD%AE"><span class="nav-number">4.3.2.</span> <span class="nav-text">如何将标准输出和错误输出同时重定向到同一位置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-Shell-%E8%84%9A%E6%9C%AC%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E5%91%A2"><span class="nav-number">4.4.</span> <span class="nav-text">在 Shell 脚本如何定义函数呢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E8%AE%A9-Shell-%E5%B0%B1%E8%84%9A%E6%9C%AC%E5%BE%97%E5%88%B0%E6%9D%A5%E8%87%AA%E7%BB%88%E7%AB%AF%E7%9A%84%E8%BE%93%E5%85%A5"><span class="nav-number">4.5.</span> <span class="nav-text">如何让 Shell 就脚本得到来自终端的输入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97"><span class="nav-number">4.6.</span> <span class="nav-text">如何执行算术运算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="nav-number">5.</span> <span class="nav-text">文件管理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#chmod-%E5%91%BD%E4%BB%A4"><span class="nav-number">5.1.</span> <span class="nav-text">chmod 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#chown-%E5%91%BD%E4%BB%A4"><span class="nav-number">5.2.</span> <span class="nav-text">chown 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#find"><span class="nav-number">5.3.</span> <span class="nav-text">find</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#head-%E5%91%BD%E4%BB%A4"><span class="nav-number">5.4.</span> <span class="nav-text">head 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#which-%E5%91%BD%E4%BB%A4"><span class="nav-number">5.5.</span> <span class="nav-text">which 命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%A1%A3%E7%BC%96%E8%BE%91%E5%91%BD%E4%BB%A4"><span class="nav-number">6.</span> <span class="nav-text">文档编辑命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%BF%E6%8D%A2"><span class="nav-number">6.1.</span> <span class="nav-text">替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wc-%E5%91%BD%E4%BB%A4"><span class="nav-number">6.2.</span> <span class="nav-text">wc 命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="nav-number">7.</span> <span class="nav-text">磁盘管理命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E5%91%BD%E4%BB%A4"><span class="nav-number">8.</span> <span class="nav-text">网络通讯命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="nav-number">9.</span> <span class="nav-text">系统管理命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%87%E4%BB%BD%E5%8E%8B%E7%BC%A9%E5%91%BD%E4%BB%A4"><span class="nav-number">10.</span> <span class="nav-text">备份压缩命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="nav-number">11.</span> <span class="nav-text">文件描述符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97"><span class="nav-number">12.</span> <span class="nav-text">系统日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99"><span class="nav-number">13.</span> <span class="nav-text">磁盘读写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E8%AF%BB"><span class="nav-number">13.1.</span> <span class="nav-text">随机读</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E5%86%99"><span class="nav-number">13.2.</span> <span class="nav-text">随机写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%BA%E5%BA%8F%E8%AF%BB"><span class="nav-number">13.3.</span> <span class="nav-text">顺序读</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%BA%E5%BA%8F%E5%86%99"><span class="nav-number">13.4.</span> <span class="nav-text">顺序写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95"><span class="nav-number">13.5.</span> <span class="nav-text">免密登录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%8C%85"><span class="nav-number">13.6.</span> <span class="nav-text">下载包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98"><span class="nav-number">13.7.</span> <span class="nav-text">查看进程内存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux-cache%E4%B8%8D%E8%83%BD%E8%A2%AB%E9%87%8A%E6%94%BE"><span class="nav-number">13.8.</span> <span class="nav-text">linux cache不能被释放</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B"><span class="nav-number">13.9.</span> <span class="nav-text">僵尸进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell"><span class="nav-number">13.10.</span> <span class="nav-text">shell</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lvm%E6%93%8D%E4%BD%9C"><span class="nav-number">14.</span> <span class="nav-text">lvm操作</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">sk-xinye</p>
  <div class="site-description" itemprop="description">愿所有努力都不被辜负</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">142</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sk-xinye</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
